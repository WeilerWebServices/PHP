<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 305252 Maintainer: seros Status: ready -->
<!-- Generated by xml_proto.php v2.3. Found in /scripts directory of phpdoc. -->
<refentry xml:id="function.win32-create-service" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <refnamediv>
  <refname>win32_create_service</refname>
  <refpurpose>Crea una nueva entrada de servicio en la base de datos del ACS</refpurpose>
 </refnamediv>
 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type>mixed</type><methodname>win32_create_service</methodname>
   <methodparam><type>array</type><parameter>details</parameter></methodparam>
   <methodparam choice="opt"><type>string</type><parameter>machine</parameter></methodparam>
  </methodsynopsis>
 </refsect1>
 <refsect1 role="parameters">
  &reftitle.parameters;
  <para>
   <variablelist>
    <varlistentry>
     <term><parameter>details</parameter></term>
     <listitem>
      <para>
       Una matriz con los detalles del servicio:
       <variablelist>
        <varlistentry>
         <term><parameter>service</parameter></term>
         <listitem>
          <para>
           El nombre corto del servicio. Éste es el nombre que se debe usar
           para controlar el servicio utilizando el comando <literal>net</literal>.
           El servicio debe ser único (dos servicios no pueden compartir el
           mismo nombre), y lo ideal sería evitar que el nombre contenga espacios.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>display</parameter></term>
         <listitem>
          <para>El nombre para mostrar del servicio. Éste es el nombre que se verá
           en la Aplicación de Servicios.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>description</parameter></term>
         <listitem>
          <para>La descripción larga del servicio. Ésta es la descripción
           que verá en el Services Applet.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>user</parameter></term>
         <listitem>
          <para>
           El nombre de la cuenta de usuario bajo la cuál se quiere ejecutar el
           servicio. Si se omite, el servicio se ejecutará como la cuenta LocalSystem.
           Si se especifica el nombre de usuario, también se debe proporcionar una contraseña.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>password</parameter></term>
         <listitem>
          <para>
           La contraseña que se corresponde con <parameter>user</parameter>.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>path</parameter></term>
         <listitem>
          <para>
           La ruta completa de módulo ejecutable que será lanzado cuando
           el servicio es iniciado. Si se omite, se usará la ruta del proceso de
           PHP actual.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>params</parameter></term>
         <listitem>
          <para>
           Parámetros de línea de comandos a pasar al servicio cuando se inicia.
           Si quiere ejecutar un script de PHP como un servicio, el primer
           parámetro debería ser la ruta completa del script de PHP que intenta
           ejecutar. Si el nombre del script o la ruta contiene espacios encierre la
           ruta completa del script PHP con <literal>"</literal>.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>load_order</parameter></term>
         <listitem>
          <para>
           Controla el orden de carga. Ésto aún no está completamente soportado.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>svc_type</parameter></term>
         <listitem>
          <para>
           Establece el tipo de servicio. Si se omite, el valor por defecto es
           <constant>WIN32_SERVICE_WIN32_OWN_PROCESS</constant>.
           No cambie esto a menos que sepa lo que está haciendo.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>start_type</parameter></term>
         <listitem>
          <para>
           Especifica cómo debería iniciarse el servicio. Por defecto es
           <constant>WIN32_SERVICE_AUTO_START</constant> lo que significa que el
           servicio será lanzado cuando se encienda la máquina.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>error_control</parameter></term>
         <listitem>
          <para>
           Informa al ACS qué debería hacer cuando detecta un problema con
           el servicio. Por defecto es
           <constant>WIN32_SERVER_ERROR_IGNORE</constant>. El cambio de este
           valor no está aún soportado completamente.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>delayed_start</parameter></term>
         <listitem>
          <para>
           Si <parameter>delayed_start</parameter> está establecido a &true;,
           informará al SCM que este servicio debería ser iniciado después que otros
           servicios con autoinicio, más una pequeña demora.
          </para>
          <para>
           Cualquier servicio puede ser marcado como un servicio con autoinicio demorado; sin embargo
           este ajuste no tiene efecto a menos que el parámetro
           <parameter>start_type</parameter> del servicio sea
           <constant>WIN32_SERVICE_AUTO_START</constant>.
          </para>
          <para>
           Este ajuste sólo es aplicable en Windows Vista y Windows Server
           2008 o superior.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>base_priority</parameter></term>
         <listitem>
          <para>
           Para reducir el impacto en el uso del procesador, puede ser necesario
           para establecer una prioridad base más baja de lo normal.
          </para>
          <para>
           <parameter>base_priority</parameter> puede establecerse a una de las
           constantes definidas en
           <link linkend="win32service.constants.basepriorities">Clases de Prioridad Base de Win32</link>.
          </para>
         </listitem>
        </varlistentry>
       </variablelist>
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>machine</parameter></term>
     <listitem>
      <para>
       El nombre opcional de la máquina en la que quiere crear el servicio.
       Si se omite, se usará la máquina local.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </para>
 </refsect1>
 
 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   &win32service.noerror.false.error;
  </para>
 </refsect1>
 
 <refsect1 role="examples">
  &reftitle.examples;
  <para>
   <example>
    <title>Un ejemplo de <function>win32_create_service</function></title>
    <para>
     Crear un servicio con el nombre abreviado 'dummyphp'.
    </para>
    <programlisting role="php">
<![CDATA[
<?php
$x = win32_create_service(array(
    'service'     => 'dummyphp',                                          # el nombre de su servicio
    'display'     => 'ejemplo de servicio PHP',                           # descripción abreviada
    'description' => 'Este es un servicio de Windows creado usando PHP.', # descripción larga
    'params'      => '"' . __FILE__ . '"  run',                           # ruta del script y parámetros
));
debug_zval_dump($x);
?>
]]>
    </programlisting>
   </example>
  </para>
 </refsect1>
 
 <refsect1 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member><function>win32_delete_service</function></member>
    <member><link linkend="win32service.constants.basepriorities">Clases de Prioridad Base de Win32</link></member>
    <member><link linkend="win32service.constants.errors">Códigos de Error de Win32</link></member>
   </simplelist>
  </para>
 </refsect1>
 
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
